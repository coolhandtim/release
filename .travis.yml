git:
  depth: 1  
branches:
  	only:
  	  - master
language: java
jdk:
- oraclejdk7

before_script:
- mkdir -p vendor/java
- wget http://dl.google.com/closure-compiler/compiler-latest.zip && unzip compiler-latest.zip -d vendor/java/compiler
- export CLOSURE_JAR=vendor/java/compiler/compiler.jar
- git checkout "${TRAVIS_BRANCH}"

script:
- java -jar $CLOSURE_JAR --js dlc.js --js_output_file dlc.min.js --language_in=ECMASCRIPT5
- java -jar $CLOSURE_JAR --js steamgifts-plus.js --js_output_file steamgifts-plus.min.js --language_in=ECMASCRIPT5

after_success:
- git config user.name "${GIT_NAME}"
- git config user.email "${GIT_EMAIL}"
- git status
- git add dlc.min.js
- git add steamgifts-plus.min.js
- git commit -m "Auto-generated minified js"
- git push https://${GH_TOKEN}@github.com/psyren89/release.git

env:
  global:
    secure: Ie78jVXdvkTTxZ/gDoSl44EFixI5BIJ4SPikyn5VsI/Pqk6A9577sPJUgrwgVGocWVTTYI4Lqxfid8dnNV1XIiZjDb/BX509wiAFPngB0ONH1chicvlAc3R/Nwg25ImdCuoQqhwjqYhyezsphLKzAsLi+/Vvdsz5+EsOnqKYMDg=
